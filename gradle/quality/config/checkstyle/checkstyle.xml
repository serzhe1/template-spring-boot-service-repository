<?xml version="1.0"?>
<!DOCTYPE module PUBLIC
        "-//Checkstyle//DTD Checkstyle Configuration 1.3//EN"
        "https://checkstyle.org/dtds/configuration_1_3.dtd">

<module name="Checker">
    <!--
        Checkstyle baseline for backend projects
        Purposes:
         • control of complexity and readability
         • Uniform code style
         • pure imports
         • documentation requirements
    -->

    <property name="severity" value="error"/>

    <!-- Exceptions: not check build/, generated/, module-info.java -->
    <module name="SuppressionFilter">
        <property name="file" value="${config_loc}/suppressions.xml"/>
    </module>

    <!-- ===================== -->
    <!--  Common rules  -->
    <!-- ===================== -->

    <!-- Line length limit -->
    <module name="LineLength">
        <property name="max" value="120"/>
        <property name="ignorePattern" value="^package.*|^import.*"/>
    </module>

    <!-- =================== -->
    <!--  Logic and structure -->
    <!-- =================== -->
    <module name="TreeWalker">

        <!-- ====== Imports ====== -->

        <!-- Removing unused imports -->
        <module name="UnusedImports"/>

        <!-- Ban wildcard imports (import java.util.*) -->
        <module name="AvoidStarImport"/>

        <!-- Ban using internal JDK packages -->
        <module name="IllegalImport">
            <property name="illegalPkgs" value="sun,com.sun"/>
        </module>

        <!-- ====== Complexity ====== -->

        <!-- Cyclomatic complexity (branching if/switch/for) -->
        <module name="CyclomaticComplexity">
            <property name="max" value="10"/>
            <property name="severity" value="warning"/>
        </module>

        <!-- NPath — number of logical path -->
        <module name="NPathComplexity">
            <property name="max" value="200"/>
            <property name="severity" value="warning"/>
        </module>

        <!-- Complexity of boolean expressions -->
        <module name="BooleanExpressionComplexity">
            <property name="max" value="3"/>
            <property name="severity" value="warning"/>
        </module>

        <!-- Method length -->
        <module name="MethodLength">
            <property name="max" value="60"/>
        </module>

        <!-- Number of parameters in methods -->
        <module name="ParameterNumber">
            <property name="max" value="5"/>
        </module>

        <!-- Nubmer class dependencies -->
        <module name="ClassFanOutComplexity">
            <property name="max" value="20"/>
            <property name="severity" value="warning"/>
        </module>

        <!-- ====== Code hygiene ====== -->

        <!-- "Magic Numbers: add constants -->
        <module name="MagicNumber">
            <property name="ignoreNumbers" value="-1,0,1,2,100,1000"/>
            <property name="ignoreHashCodeMethod" value="true"/>
            <property name="ignoreAnnotation" value="true"/>
        </module>

        <!-- Hidden fields: local variables must not have the same names as fields -->
        <module name="HiddenField">
            <property name="ignoreConstructorParameter" value="true"/>
            <property name="severity" value="warning"/>
        </module>

        <!-- Control equals/hashCode contract -->
        <module name="EqualsHashCode"/>

        <!-- Check one top level public class -->
        <module name="OneTopLevelClass"/>

        <!-- Check @Override annotation -->
        <module name="MissingOverride"/>

        <!-- ====== Style and readability ====== -->

        <!-- Braces are required even for single-line statements -->
        <module name="NeedBraces"/>

        <!-- Opening curly brace should be on the same line -->
        <module name="LeftCurly"/>

        <!-- Closing curly brace should be on a separate line -->
        <module name="RightCurly"/>

        <!-- Whitespace after commas, semicolons, etc. -->
        <module name="WhitespaceAfter"/>

        <!-- Whitespace around operators (=, +, -, etc.) -->
        <module name="WhitespaceAround"/>

        <!-- Whitespace inside parentheses -->
        <module name="ParenPad"/>

        <!-- Whitespace between method name and '(' -->
        <module name="MethodParamPad"/>

        <!-- Indentation rules (aligned with 4-space style) -->
        <module name="Indentation">
            <property name="basicOffset" value="4"/>
            <property name="braceAdjustment" value="0"/>
            <property name="caseIndent" value="4"/>
            <property name="tabWidth" value="4"/>
        </module>

    </module> <!-- TreeWalker -->
</module> <!-- Checker -->